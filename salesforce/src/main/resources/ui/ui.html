<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Trineo</title>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-treeview/1.2.0/bootstrap-treeview.min.css">

<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
<link rel="stylesheet" href="/css/style.css" />
</head>
<body>
	<nav class="navbar navbar-default navbar-fixed-top">
		<div class="container">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="#">Trineo</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav" data-bind="foreach: sections">
					<li data-bind="css: {active: $data == $root.chosenSection()}">
						<a data-bind="click: $root.gotoSection">
							<i data-bind="attr: {class: 'fa fa-' + $data}" aria-hidden="true"></i>
							<span data-bind="text: $data"></span>
						</a>
					</li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
							<span class="fa fa-user" aria-hidden="true"></span>
							<span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><span><strong>User Name</strong></span></li>
							<li class="disabled"><span><small>email@address.com</small></span></li>
							<li role="separator" class="divider"></li>
							<li>
								<a href="#">
									<span class="fa fa-cog" aria-hidden="true"></span> Settings
								</a>
							</li>
							<li>
								<a href="#Accounts">
									<span class="fa fa-flash" aria-hidden="true"></span> Connected Accounts
								</a>
							</li>
							<li>
								<a href="#">
									<span class="fa fa-power-off" aria-hidden="true"></span> Log Out
								</a>
							</li>
						</ul>
					</li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

    <!-- New Account Modal -->
    <div data-bind="modal: {
	    visible: newAccountModalVisible,
	    header: { data: { label: 'New Account' } },
	    body: { name: 'newAccountModalTemplate' },
	    footer: { data: { action: addAccount, closeLabel: 'Cancel', primaryLabel: 'Add' } }
    }"></div>

    <!-- New Client Modal -->
    <div data-bind="modal: {
        visible: newClientModalVisible,
        header: { data: { label: 'New Client' } },
        body: { name: 'newClientModalTemplate' },
        footer: { data: { action: addClient, closeLabel: 'Cancel', primaryLabel: 'Add' } }
    }"></div>

    <!-- New Org Modal -->
    <div data-bind="modal: {
        visible: newOrgModalVisible,
        header: { data: { label: 'New Org' } },
        body: { name: 'newOrgModalTemplate' },
        footer: { data: { action: addOrg, closeLabel: 'Cancel', primaryLabel: 'Add' } }
    }"></div>

    <!-- New Repo Modal -->
    <div data-bind="modal: {
        visible: newRepoModalVisible,
        header: { data: { label: 'New Repo' } },
        body: { name: 'newRepoModalTemplate' },
        footer: { data: { action: addRepo, closeLabel: 'Cancel', primaryLabel: 'Add' } }
    }"></div>

    <!-- New Board Modal -->
    <div data-bind="modal: {
        visible: newBoardModalVisible,
        header: { data: { label: 'New Board' } },
        body: { name: 'newBoardModalTemplate' },
        footer: { data: { action: addBoard, closeLabel: 'Cancel', primaryLabel: 'Add' } }
    }"></div>

	<div class="container">
		<div data-bind="visible: $root.chosenSection() == 'Accounts'">
            <div class="row">
                <div class="col-xs-10">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row" id="accountsTable">
				                <table class="table table-striped table-hover">
				                    <tbody data-bind="foreach: $root.accounts">
				                        <tr>
				                            <td>
				                                <i data-bind="attr: {class: 'fa fa-' + service + ' fa-2x'}"></i>
				                                <span data-bind="text: name"></span>
				                            </td>
				                            <td>
				                                <button type="button" class="btn btn-default" data-bind="click: $root.verifyAccount">
				                                    <i class="fa fa-check" aria-hidden="true"></i> Verify
				                                </button>
				                                <button type="button" class="btn btn-default" data-bind="click: $root.renameAccount">
				                                    <i class="fa fa-edit" aria-hidden="true"></i> Rename
				                                </button>
				                                <button type="button" class="btn btn-warning" data-bind="click: $root.deleteAccount">
				                                    <i class="fa fa-remove" aria-hidden="true"></i> Delete
				                                </button>
				                            </td>
				                        </tr>
				                    </tbody>
				                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <button type="button" class="btn btn-primary" data-bind="click: showNewAccountModal">
                        <span class="fa fa-plus" aria-hidden="true"></span> New
                    </button>
                </div>
            </div>
		</div>
        <div data-bind="visible: $root.chosenSection() == 'Clients'">
            <div class="row">
                <div class="col-xs-10">
                    <div class="panel panel-default">
                        <div class="panel-body">
							<div class="row" data-bind="foreach: clients" id="clients">
							    <div class="col-sm-12">
							        <div class="panel panel-default">
							            <div class="panel-heading">
							                <button type="button" class="close" aria-label="Delete" title="Delete" data-bind="click: $root.deleteClient">
							                    <i class="fa fa-remove" aria-hidden="true"></i>
							                </button>
							                <h3 class="panel-title" data-bind="text: $data.name"></h3>
							            </div>
							            <div class="panel-body">
							                <div class="row">
							                    <div class="col-sm-6">
							                        <h4>
							                            <button type="button" class="close" aria-label="Add Org" title="Add Org">
							                                <i class="fa fa-plus" aria-hidden="true"></i>
							                            </button>
							                            Salesforce Orgs
							                        </h4>
							                        <table class="table table-striped table-hover bordered-table">
							                            <tbody data-bind="foreach: $data.organizations">
							                                <tr>
							                                    <td>
							                                        <a data-bind="attr: {href: '#Salesforce/' + $data.id}, text: $data.nickName != null ? $data.nickName : $data.name"></a>
							                                    </td>
							                                    <td>
							                                        <button type="button" class="btn btn-default backup" data-bind="click: $root.startOrgBackup">
							                                            <i class="fa fa-cloud-download" aria-hidden="true"></i>
							                                        </button>
							                                        <button type="button" class="btn btn-default tests" data-bind="click: $root.startOrgTestRun">
							                                            <i class="fa fa-tasks" aria-hidden="true"></i>
							                                        </button>
							                                    </td>
							                                </tr>
							                            </tbody>
							                        </table>
							                    </div>
							                    <div class="col-sm-6">
							                        <h4>
							                            <button type="button" class="close" aria-label="Add Repo" title="Add Repo">
							                                <i class="fa fa-plus" aria-hidden="true"></i>
							                            </button>
							                            GitHub Repos
							                        </h4>
							                        <table class="table table-striped table-hover bordered-table">
							                            <tbody data-bind="foreach: $data.repositories">
							                                <tr>
							                                    <td>
							                                        <a data-bind="attr: {href: '#Github/' + $data.id}, text: $data.name"></a>
							                                    </td>
							                                    <td>
							                                        <button type="button" class="btn btn-warning">
							                                            <i class="fa fa-remove" aria-hidden="true"></i>
							                                        </button>
							                                    </td>
							                                </tr>
							                            </tbody>
							                        </table>
							                    </div>
                                                <div class="col-sm-6">
                                                    <h4>
                                                        <button type="button" class="close" aria-label="Add Repo" title="Add Repo">
                                                            <i class="fa fa-plus" aria-hidden="true"></i>
                                                        </button>
                                                        Trello Boards
                                                    </h4>
                                                    <table class="table table-striped table-hover bordered-table">
                                                        <tbody data-bind="foreach: $data.boards">
                                                            <tr>
                                                                <td>
                                                                    <a data-bind="attr: {href: '#Trello/' + $data.id}, text: $data.name"></a>
                                                                </td>
                                                                <td>
                                                                    <button type="button" class="btn btn-warning">
                                                                        <i class="fa fa-remove" aria-hidden="true"></i>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
							                </div>
							            </div>
							        </div>
							    </div>
							</div>
						</div>
					</div>
				</div>
                <div class="col-xs-2">
                    <button type="button" class="btn btn-primary" data-bind="click: showNewClientModal">
                        <span class="fa fa-plus" aria-hidden="true"></span> New
                    </button>
                </div>
			</div>
        </div>
        <div data-bind="visible: $root.chosenSection() == 'Salesforce' && $root.org() == null">
			<div class="row">
				<div class="col-xs-10">
					<div class="panel panel-default">
						<div class="panel-body">
							<div class="row" id="orgsTable">
								<table class="table table-striped table-hover">
									<thead>
										<tr>
											<th>Name</th>
											<th>Type</th>
											<th>Sandbox</th>
											<th>Account</th>
											<th>Client</th>
											<th>&nbsp;</th>
										</tr>
									</thead>
									<tbody data-bind="foreach: orgs">
										<tr>
											<td>
											    <a data-bind="attr: {href: '#Salesforce/' + $data.id}, text: $data.name"></a>
											</td>
											<td>
											    <a data-bind="attr: {href: '#Salesforce/' + $data.id}, text: $data.organizationType"></a>
											</td>
											<td>
											    <a data-bind="attr: {href: '#Salesforce/' + $data.id}, text: $data.sandbox ? 'yes' : 'no'"></a>
											</td>
											<td>
											    <a data-bind="attr: {href: '#Accounts/' + $data.accountId}, text: $data.accountName"></a>
											</td>
											<td>
											    <a data-bind="attr: {href: '#Clients/' + $data.clientId}, text: $data.clientName"></a>
											</td>
											<td>
												<button type="button" class="btn btn-default" data-bind="click: startOrgBackup">
												    <i class="fa fa-cloud-download" aria-hidden="true"></i>
												</button>
												<button type="button" class="btn btn-default" data-bind="click: startOrgTestRun">
												    <i class="fa fa-tasks" aria-hidden="true"></i>
												</button>
												<button type="button" class="btn btn-warning" data-bind="click: deleteOrg">
												    <i class="fa fa-remove" aria-hidden="true"></i>
												</button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
				<div class="col-xs-2">
					<button type="button" class="btn btn-primary" data-bind="click: showNewOrgModal">
			    		<span class="fa fa-plus" aria-hidden="true"></span> New
					</button>
				</div>
			</div>
        </div>
        <!-- ko if: $root.org() != null -->
        <div data-bind="visible: $root.chosenSection() == 'Salesforce'">
            <div class="row">
                <div class="col-xs-11 col-xs-offset-1">
                    <div id="orgName" data-bind="visible: !$root.org().name.isEditing()">
                        <h1>
                            <span data-bind="text: $root.org().name"></span>
                            <a class="small btn edit" data-bind="click: $root.org().name.beginEdit">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            </a>
                        </h1>
                    </div>
                    <div class="input-group input-group-lg" data-bind="visible: $root.org().name.isEditing">
                        <input type="text" class="form-control" id="newOrgName" data-bind="value: $root.org().name" placeholder="Org Name" />
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-danger" data-bind="click: $root.org().name.cancelEdit">
                                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                            </button>
                            <button type="button" class="btn btn-success" data-bind="click: function() { $root.org().updateName(); $root.org().name.endEdit(); }">
                                <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                            </button>
                        </span>
                    </div>
                </div>
            </div>
            <ul class="nav nav-tabs" id="OrgTabs" data-bind="foreach: $root.subSections">
                <li data-bind="css: {active: $data == $root.chosenSubsection()}">
                    <a data-bind="attr: {href: '#Salesforce/' + $root.org().id + '/' + $data}, text: $data"></a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" data-bind="css: {active: 'Overview' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="col-md-6">
                            <div data-bind="visible: !$root.org().clientName.isEditing()">
                                <span>Client: </span>
                                <span data-bind="text: $root.org().clientName"></span>
                                <a class="btn edit" data-bind="click: $root.org().clientName.beginEdit">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </a>
                            </div>
                            <div class="input-group" data-bind="visible: $root.org().clientName.isEditing">
                                <span class="input-group-addon">Client: </span>
                                <select class="form-control" data-bind="options: $root.clients, optionsText: 'name', optionsValue: 'name', optionsCaption: 'choose...', value: $root.org().clientName"></select>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-danger" data-bind="click: $root.org().clientName.cancelEdit">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                    </button>
                                    <button type="button" class="btn btn-success" data-bind="click: function() { $root.org().updateClientName(); $root.org().clientName.endEdit(); }">
                                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div data-bind="visible: !$root.org().branchId.isEditing()">
                                <span>Branch: </span>
                                <span data-bind="text: $root.org().branchName"></span>
                                <a class="btn edit" data-bind="click: $root.org().branchId.beginEdit">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </a>
                            </div>
                            <div class="input-group" data-bind="visible: $root.org().branchId.isEditing">
                                <span class="input-group-addon">Branch: </span>
                                <select class="form-control" data-bind="options: $root.branches, optionsText: 'name', optionsValue: 'id', optionsCaption: 'choose...', value: $root.org().branchId, valueAllowUnset: true"></select>
                                <div class="input-group-btn">
                                    <button type="button" class="btn btn-danger" data-bind="click: $root.org().branchId.cancelEdit">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                    </button>
                                    <button type="button" class="btn btn-success" data-bind="click: function() { $root.org().updateBranchName(); $root.org().branchId.endEdit(); }">
                                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Backups' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="panel panel-default">
	                            <div class="panel-body">
	                                <div class="row" id="backupsTable">
				                        <table class="table table-striped table-hover">
				                            <tbody data-bind="foreach: $root.backups">
				                                <tr data-bind="css: {success: $data.status == 'SUCCESSFUL', danger: $data.status == 'FAILED', warning: $data.status == 'IN_PROGRESS'}">
				                                    <td>
			                                            <a data-bind="click: $root.org().startOrgBackup.bind($data, $root.org()), text: $data.name"></a>
				                                    </td>
				                                    <td>
				                                        <button type="button" class="btn btn-warning">
				                                            <i class="fa fa-remove" aria-hidden="true"></i>
				                                        </button>
				                                    </td>
				                                </tr>
				                            </tbody>
				                        </table>
	                                </div>
	                            </div>
                            </div>
                        </div>
                        <div class="col-md-6">
	                        <button type="button" class="btn btn-primary backup" data-bind="click: $root.org().startOrgBackup.bind($data, $root.org())">
	                            <i class="fa fa-cloud-download" aria-hidden="true"></i> New Backup
	                        </button>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Metadata' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="panel panel-default col-xs-4">
                            <div class="row" data-bind="treeview: $root.metadata" id="metadataTree"></div>
                        </div>
                        <div class="col-xs-8">
                            <div class="panel panel-default" id="codePanel" data-bind="visible: $root.content() != null">
                                <div class="panel-heading">
                                    <h3 class="panel-title" id="codeHead">Panel title</h3>
                                </div>
                                <div id="code">
									<table class="table table-condensed">
										<tbody data-bind="foreach: $root.content">
											<tr>
											    <td class="num" data-bind="text: $index() + 1"></td>
											    <td class="code" data-bind="html: $data"></td>
											</tr>
										</tbody>
									</table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Tests' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="panel panel-default col-xs-5">
                            <div class="row" data-bind="treeview: $root.testTree" id="testTree"></div>
                        </div>
                        <div class="col-xs-7">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Code Coverage</h3>
                                </div>
                                <div class="panel-body">
                                    <div class="row" id="coverageTable">
		                                <table class="table table-striped table-hover">
		                                    <thead>
		                                        <tr>
		                                            <th>Namespace</th>
		                                            <th>Name</th>
		                                            <th>Percent</th>
		                                            <th>Coverage</th>
		                                        </tr>
		                                    </thead>
		                                    <tbody data-bind="foreach: $root.codeCoverage">
												<tr>
												    <td data-bind="text: $data.namespace"></td>
												    <td data-bind="text: $data.name"></td>
												    <td data-bind="text: $data.percent.toFixed(0)"></td>
												    <td data-bind="text: ($data.numLocations - $data.numLocationsNotCovered) + '/' + $data.numLocations"></td>
												</tr>
		                                    </tbody>
		                                </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: $root.chosenSubsection().startsWith('Compare')}">
                    <!-- ko if: 'Compare' == $root.chosenSubsection() -->
                    <div class="row compare-breadcrumb clearfix">
                        <div class="col-xs-5">
                            <select class="form-control" data-bind="options: $root.backups, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Source', value: $root.org().sourceBackup"></select>
                        </div>
                        <div class="col-xs-5">
                            <select class="form-control" data-bind="options: $root.backups, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Target', value: $root.org().targetBackup"></select>
                        </div>
						<button class="btn btn-default col-xs-2" id="compareButton" data-bind="click: $root.org().compareBackups, enable: $root.org().sourceBackup() != null && $root.org().targetBackup() != null && $root.org().sourceBackup() != $root.org().targetBackup()">
						    Compare
						</button>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: 'Compare Branch' == $root.chosenSubsection() -->
                    <div class="row">
                        <div class="input-group">
                            <div class="input-group-addon">Target:</div>
                            <div class="form-control" data-bind="text: $root.org().branchName"></div>
                            <div class="input-group-btn">
		                        <button class="btn btn-default" data-bind="click: $root.org().compareBranch, enable: $root.org().branchName">
		                            Compare
		                        </button>
                                <button class="btn btn-default" data-bind="enable: $root.org().branchName">
                                    Commit
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: 'Compare Orgs' == $root.chosenSubsection() -->
                    <div class="row compare-breadcrumb clearfix">
                        <div class="col-xs-5">
                            Source: <span data-bind="text: $root.org().name"></span>
                        </div>
                        <div class="col-xs-5">
                            <select class="form-control" data-bind="options: $root.org().clientOrgs, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Target', value: $root.org().targetOrg"></select>
                        </div>
                        <button class="btn btn-default col-xs-2" id="compareButton" data-bind="click: $root.org().compareOrgs, enable: $root.org().targetOrg() != null && $root.org().targetOrg() != $root.org().id">
                            Compare
                        </button>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: $root.org().diffTree().length > 0 -->
                    <div class="row" id="compareData">
                        <div class="panel panel-default col-xs-4" id="diffTree">
                            <div class="row">
                                <ul data-bind="foreach: $root.org().diffTree" class="list-group">
                                    <li data-bind="text: $data, click: function() { $root.org().selectedDiff($data); }, css: {active: $root.org().selectedDiff() == $data}" class="list-group-item"></li>
                                </ul>
                            </div>
                        </div>
	                    <!-- ko if: $root.org().selectedDiff -->
                        <div class="col-xs-8">
                            <div class="panel panel-default">
                                <div id="diffContent" data-bind="foreach: $root.org().diffData">
                                    <!-- ko if: $root.org().selectedDiff() == $data[0] -->
		                            <table class="table table-condensed diff">
		                                <tbody data-bind="foreach: $data[1]">
		                                    <tr class="header">
		                                        <td class="num">...</td>
		                                        <td class="num">...</td>
		                                        <td class="line" data-bind="text: '@@ ' + formatGitHeader($data.headerA) + ' ' + formatGitHeader($data.headerB) + ' @@'"></td>
		                                    </tr>
		                                    <!-- ko foreach: $data.lines -->
                                            <tr data-bind="css: {removed: $data.removed, added: $data.added}">
                                                <td class="num">
                                                <!-- ko if: $data.added -->
                                                &nbsp;&nbsp;&nbsp;
                                                <!-- /ko -->
                                                <!-- ko if: !$data.added -->
                                                <!-- ko text: $data.lineNumA + 1 -->
                                                <!-- /ko -->
                                                <!-- /ko -->
                                                </td>
                                                <td class="num">
                                                <!-- ko if: $data.removed -->
                                                &nbsp;&nbsp;&nbsp;
                                                <!-- /ko -->
                                                <!-- ko if: !$data.removed -->
                                                <!-- ko text: $data.lineNumB + 1 -->
                                                <!-- /ko -->
                                                <!-- /ko -->
                                                </td>
                                                <td class="line" data-bind="html: $data.line"></td>
                                            </tr>
	                                        <!-- /ko -->
		                                </tbody>
		                            </table>
		                            <!-- /ko -->
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                </div>
            </div>
        </div>
        <!-- /ko -->
        <div data-bind="visible: $root.chosenSection() == 'GitHub' && $root.repo() == null">
            <div class="row">
                <div class="col-xs-10">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row" id="reposTable">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Client</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: repos">
                                        <tr>
                                            <td>
                                                <a data-bind="attr: {href: '#GitHub/' + $data.id}, text: $data.name"></a>
                                            </td>
                                            <td>
                                                <a data-bind="attr: {href: '#Clients/' + $data.clientId}, text: $data.clientName"></a>
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-warning" data-bind="click: deleteRepo">
                                                    <i class="fa fa-remove" aria-hidden="true"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <button type="button" class="btn btn-primary" data-bind="click: showNewRepoModal">
                        <span class="fa fa-plus" aria-hidden="true"></span> New
                    </button>
                </div>
            </div>
        </div>
        <!-- ko if: $root.repo() != null -->
        <div data-bind="visible: $root.chosenSection() == 'GitHub'">
            <div class="row">
                <div class="col-xs-11 col-xs-offset-1">
	                <h1>
	                    <span data-bind="text: $root.repo().name"></span>
	                    <a class="small btn edit" data-bind="click: $root.repo().name.beginEdit">
	                        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
	                    </a>
	                </h1>
                </div>
            </div>
            <ul class="nav nav-tabs" data-bind="foreach: $root.subSections">
                <li data-bind="css: {active: $data == $root.chosenSubsection()}">
                    <a data-bind="attr: {href: '#GitHub/' + $root.repo().id + '/' + $data}, text: $data"></a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane" data-bind="css: {active: 'Overview' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="col-md-6">
                            <div data-bind="visible: !$root.repo().clientName.isEditing()">
                                <span>Client: </span>
                                <span data-bind="text: $root.repo().clientName"></span>
                                <a class="btn edit" data-bind="click: $root.repo().clientName.beginEdit">
                                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                </a>
                            </div>
                            <div class="input-group" data-bind="visible: $root.repo().clientName.isEditing">
                                <span class="input-group-addon">Client: </span>
                                <select class="form-control" data-bind="options: $root.clients, optionsText: 'name', optionsValue: 'name', optionsCaption: 'choose...', value: $root.repo().clientName"></select>
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-danger" data-bind="click: $root.repo().clientName.cancelEdit">
                                        <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                                    </button>
                                    <button type="button" class="btn btn-success" data-bind="click: function() { $root.repo().updateClientName(); $root.repo().clientName.endEdit(); }">
                                        <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Branches' == $root.chosenSubsection()}">
		            <div class="row">
		                <div class="col-xs-10">
		                    <div class="panel panel-default">
		                        <div class="panel-body">
		                            <div class="row" id="branchesTable">
		                                <table class="table table-striped table-hover">
			                                <thead>
			                                    <tr>
			                                        <th>Name</th>
			                                        <th>Org</th>
			                                        <th>&nbsp;</th>
			                                    </tr>
			                                </thead>
			                                <tbody data-bind="foreach: $root.branches">
		                                       <tr>
		                                            <td data-bind="text: $data.name"></td>
		                                            <td data-bind="text: $data.orgName"></td>
		                                            <td>
		                                                <button type="button" class="btn btn-default checkout">Checkout</button>
		                                            </td>
		                                       </tr>
			                                </tbody>
		                                </table>
		                            </div>
		                        </div>
		                    </div>
		                </div>
		            </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Tags' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="col-xs-10">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div class="row" id="tagsTable">
                                        <table class="table table-striped table-hover">
                                            <thead>
			                                    <tr>
			                                        <th>Name</th>
			                                        <th>SHA</th>
			                                        <th>&nbsp;</th>
			                                    </tr>
                                            </thead>
                                            <tbody data-bind="foreach: $root.tags">
                                               <tr>
		                                           <td data-bind="text: $data.name"></td>
		                                           <td data-bind="text: $data.sha"></td>
		                                           <td>
		                                               <button type="button" class="btn btn-default">
		                                                   <i class="fa fa-cloud-download" aria-hidden="true"></i> Tar
		                                               </button>
		                                               <button type="button" class="btn btn-default">
		                                                   <i class="fa fa-cloud-download" aria-hidden="true"></i> Zip
		                                               </button>
		                                           </td>
                                               </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Commits' == $root.chosenSubsection()}">
                    <div class="row">
                        <div class="col-xs-10">
                            <div class="panel panel-default">
                                <div class="panel-body">
                                    <div class="row" id="commitsTable">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr>
			                                        <th>Name</th>
			                                        <th>&nbsp;</th>
                                                </tr>
                                            </thead>
                                            <tbody data-bind="foreach: $root.commits">
                                               <tr>
                                                    <td data-bind="text: $data.name"></td>
                                                    <td>&nbsp;</td>
                                               </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane" data-bind="css: {active: 'Compare' == $root.chosenSubsection()}">
                    <div class="row compare-breadcrumb clearfix">
                        <div class="col-xs-5">
                            <select class="form-control" data-bind="options: $root.branches, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Source', value: $root.repo().sourceBranch"></select>
                        </div>
                        <div class="col-xs-5">
                            <select class="form-control" data-bind="options: $root.branches, optionsText: 'name', optionsValue: 'id', optionsCaption: 'Target', value: $root.repo().targetBranch"></select>
                        </div>
                        <button class="btn btn-default col-xs-2" id="compareButton" data-bind="click: $root.repo().compare, enable: $root.repo().sourceBranch() != null && $root.repo().targetBranch() != null && $root.repo().sourceBranch() != $root.repo().targetBranch()">
                            Compare
                        </button>
                    </div>
                    <!-- ko if: $root.repo().diffTree().length > 0 -->
                    <div class="row" id="compareData">
                        <div class="panel panel-default col-xs-4" id="diffTree">
                            <div class="row">
                                <ul data-bind="foreach: $root.repo().diffTree" class="list-group">
                                    <li data-bind="text: $data, click: function() { $root.repo().selectedDiff($data); }, css: {active: $root.repo().selectedDiff() == $data}" class="list-group-item"></li>
                                </ul>
                            </div>
                        </div>
                        <!-- ko if: $root.repo().selectedDiff -->
                        <div class="col-xs-8">
                            <div class="panel panel-default">
                                <div id="diffContent" data-bind="foreach: $root.repo().diffData">
                                    <!-- ko if: $root.repo().selectedDiff() == $data[0] -->
                                    <table class="table table-condensed diff">
                                        <tbody data-bind="foreach: $data[1]">
                                            <tr class="header">
                                                <td colspan="3" class="line" data-bind="text: '@@ ' + formatGitHeader($data.headerA) + ' ' + formatGitHeader($data.headerB) + ' @@'"></td>
                                            </tr>
                                            <!-- ko foreach: $data.lines -->
                                            <tr data-bind="css: {removed: $data.removed, added: $data.added}">
                                                <td class="num">
                                                <!-- ko if: $data.added -->
                                                &nbsp;&nbsp;&nbsp;
                                                <!-- /ko -->
                                                <!-- ko if: !$data.added -->
                                                <!-- ko text: $data.lineNumA + 1 -->
                                                <!-- /ko -->
                                                <!-- /ko -->
                                                </td>
                                                <td class="num">
                                                <!-- ko if: $data.removed -->
                                                &nbsp;&nbsp;&nbsp;
                                                <!-- /ko -->
                                                <!-- ko if: !$data.removed -->
                                                <!-- ko text: $data.lineNumB + 1 -->
                                                <!-- /ko -->
                                                <!-- /ko -->
                                                </td>
                                                <td class="line" data-bind="html: $data.line"></td>
                                            </tr>
                                            <!-- /ko -->
                                        </tbody>
                                    </table>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </div>
                        <!-- /ko -->
                    </div>
                    <!-- /ko -->
                </div>
            </div>
        </div>
        <!-- /ko -->
        <div data-bind="visible: $root.chosenSection() == 'Trello' && $root.board() == null">
            <div class="row">
                <div class="col-xs-10">
                    <div class="panel panel-default">
                        <div class="panel-body">
                            <div class="row" id="boardsTable">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Client</th>
                                            <th>&nbsp;</th>
                                        </tr>
                                    </thead>
                                    <tbody data-bind="foreach: boards">
                                        <tr>
                                            <td>
                                                <a data-bind="attr: {href: '#Trello/' + $data.id}, text: $data.name"></a>
                                            </td>
                                            <td>
                                                <a data-bind="attr: {href: '#Clients/' + $data.clientId}, text: $data.clientName"></a>
                                            </td>
                                            <td>
                                                <button type="button" class="btn btn-warning" data-bind="click: deleteBoard">
                                                    <i class="fa fa-remove" aria-hidden="true"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-2">
                    <button type="button" class="btn btn-primary" data-bind="click: showNewBoardModal">
                        <span class="fa fa-plus" aria-hidden="true"></span> New
                    </button>
                </div>
            </div>
        </div>
        <!-- ko if: $root.board() != null -->
        <div data-bind="visible: $root.chosenSection() == 'Trello'">
            <div class="row">
                <div class="col-xs-11 col-xs-offset-1">
                    <h1 data-bind="text: $root.board().name">
                    </h1>
                </div>
            </div>
            <ul class="nav nav-tabs" data-bind="foreach: $root.subSections">
                <li data-bind="css: {active: $data.id == $root.chosenSubsection()}">
                    <a data-bind="attr: {href: '#Trello/' + $root.board().id + '/' + $data.id}, text: $data.name"></a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="row">
                    <div class="col-md-6">
                        <ul class="list-group" data-bind="foreach: $root.cards">
                            <li class="list-group-item">
                                <span data-bind="text: $data.name"></span>
                                <!-- ko foreach: $data.labels -->
                                <span class="badge" data-bind="text: $data.name"></span>
                                <!-- /ko -->
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <!-- /ko -->
	</div>

    <script type="text/html" id="newAccountModalTemplate">
        <form class="form">
            <div class="form-group">
                <label class="control-label">Name</label>
                <input type="text" class="form-control" autofocus data-bind="value: $root.newAccount.name" />
            </div>
            <div class="form-group">
                <label class="control-label">Service</label>
                <select class="form-control" data-bind="options: $root.services, optionsCaption: 'choose...', value: $root.newAccount.service" />
            </div>
            <div class="form-group" data-bind="visible: $root.newAccount.service() == 'salesforce'">
                <label class="control-label">Environment</label>
                <select class="form-control" data-bind="options: $root.environments, optionsCaption: 'choose...', value: $root.newAccount.environment" />
            </div>
        </form>
    </script>

    <script type="text/html" id="newClientModalTemplate">
        <form class="form">
            <div class="form-group">
                <label class="control-label">Name</label>
                <input type="text" class="form-control" autofocus data-bind="value: $root.newClientName" />
            </div>
        </form>
    </script>

    <script type="text/html" id="newOrgModalTemplate">
		<form class="form">
		    <div class="form-group">
		        <label class="control-label">Account</label>
		        <select class="form-control" data-bind="options: $root.accounts, optionsText: 'name', optionsValue: 'id', optionsCaption: 'choose...', value: $root.newOrgAccount" />
		    </div>
		</form>
    </script>

    <script type="text/html" id="newRepoModalTemplate">
        <form class="form">
            <div class="form-group">
                <label class="control-label">Account</label>
                <select class="form-control" data-bind="options: $root.accounts, optionsText: 'name', optionsValue: 'id', optionsCaption: 'choose...', value: $root.newRepoAccount" />
            </div>
            <div class="form-group">
                <label class="control-label">URL</label>
                <input type="text" class="form-control" data-bind="value: $root.cloneURL" />
            </div>
        </form>
    </script>

    <script type="text/html" id="newBoardModalTemplate">
        <form class="form">
            <div class="form-group">
                <label class="control-label">Account</label>
                <select class="form-control" data-bind="options: $root.accounts, optionsText: 'name', optionsValue: 'id', optionsCaption: 'choose...', value: $root.newBoardAccount" />
            </div>
        </form>
    </script>

	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout.mapping/2.4.1/knockout.mapping.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/sammy.js/0.7.6/sammy.min.js"></script>
	<script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-treeview/1.2.0/bootstrap-treeview.min.js"></script>
    <script type="text/javascript" src="/js/knockstrap.js"></script>
    <script type="text/javascript" src="/js/knockout.editable.js"></script>
    <script type="text/javascript" src="/js/knockout.treeview.js"></script>
	<script type="text/javascript" src="/js/main.js"></script>
</body>
</html>